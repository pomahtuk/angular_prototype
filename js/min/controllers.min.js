(function(){"use strict";var e,t,i;t=function(e){var t,i;return e=$(e),i=e.offset().top,t=function(){return i<$(this).offset().top},$.merge(e,e.nextUntil(t)).last()},e=function(e,t){return e.length>0&&t.length>0&&e.offset().top===t.offset().top},i=function(e,t,i,a){var r,n,c,s,o,u;return u=$(window).innerWidth(),s=t+i,o=u-2*a+i,n=Math.floor(o/s),r=u-(n*s-i),c=Math.floor(r/2),e.css({"margin-right":0,"margin-left":i}),e.each(function(e){return 0===e%n?$(this).css({"margin-left":c}):void 0})},angular.module("Museum.controllers",[]).controller("IndexController",["$scope","$http","$filter","$window","sharedProperties",function(e,t,a,r,n){return e.museums=[{name:"Imperial Peace Museum",packege_status:"generated",city:"London",image:"/img/museum.jpg",type:"museum"},{name:"Imperial War Museum",packege_status:"generated",city:"Tokio",image:"/img/museum.jpg",type:"museum"},{name:"Imperial Peace Exhibitin",packege_status:"generated",city:"Moscow",image:"/img/museum.jpg",type:"museum"},{name:"Imperial War Exhibitin",packege_status:"generated",city:"Berlin",image:"/img/museum.jpg",type:"museum"},{name:"Republican Peace Museum",packege_status:"process",city:"Tokio",image:"/img/museum.jpg",type:"tour"},{name:"Republican Peace Exhibitin",packege_status:"process",city:"London",image:"/img/museum.jpg",type:"tour"},{name:"Republican War Museum",packege_status:"process",city:"Berlin",image:"/img/museum.jpg",type:"tour"},{name:"Republican War Exhibitin",packege_status:"process",city:"London",image:"/img/museum.jpg",type:"museum"}],e.current_museum={language:"ru",name:"Museum of modern art",stories:[{name:"Russian",language:"ru"},{name:"Spanish",language:"es"},{name:"English",language:"en"}],new_story_link:"/1/1/1/"},e.user={mail:"pman89@yandex.ru",providers:[{name:"IZI.travel Test Provider"},{name:"IZI.travel Second Provider"}]},e.provider={name:"content_1",id:"1",passcode:"passcode",passcode_edit_link:"/1/pass/edit/"},e.exhibits=[{name:"Богоматерь Владимирская, с двунадесятыми праздниками",number:"1",image:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/14845c98-05ec-4da8-8aff-11808ecc123f_800x600.jpg",thumb:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/7104d8b7-2f73-4b98-bfb2-b4245a325ce3_480x360.jpg",publish_state:"all",description:"",qr_code:{url:"/img/qr_code.png",print_link:"http://localhost:8000/img/qr_code.png"},images:[{image:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/14845c98-05ec-4da8-8aff-11808ecc123f_800x600.jpg",thumb:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/7104d8b7-2f73-4b98-bfb2-b4245a325ce3_480x360.jpg"},{image:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/14845c98-05ec-4da8-8aff-11808ecc123f_800x600.jpg",thumb:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/7104d8b7-2f73-4b98-bfb2-b4245a325ce3_480x360.jpg"}],stories:[{language:"ru",name:"Богоматерь Владимирская, с двунадесятыми праздниками",description:"test description",audio:"http://www.jplayer.org/audio/ogg/TSP-01-Cro_magnon_man.ogg",quiz:{question:"are you sure?",description:"can you tell me?",answers:[{title:"yes",correct:!1,id:0},{title:"may be",correct:!0,id:1},{title:"who cares?",correct:!1,id:2},{title:"nope",correct:!1,id:3}]}}]},{name:"Богоматерь Владимирская, с двунадесятыми праздниками",number:"1",image:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/14845c98-05ec-4da8-8aff-11808ecc123f_800x600.jpg",thumb:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/7104d8b7-2f73-4b98-bfb2-b4245a325ce3_480x360.jpg",publish_state:"all",description:"",qr_code:{url:"/img/qr_code.png",print_link:"http://localhost:8000/img/qr_code.png"},images:[{image:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/14845c98-05ec-4da8-8aff-11808ecc123f_800x600.jpg",thumb:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/7104d8b7-2f73-4b98-bfb2-b4245a325ce3_480x360.jpg"},{image:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/14845c98-05ec-4da8-8aff-11808ecc123f_800x600.jpg",thumb:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/7104d8b7-2f73-4b98-bfb2-b4245a325ce3_480x360.jpg"}],stories:[{language:"ru",name:"Богоматерь Владимирская, с двунадесятыми праздниками",description:"test description",audio:"http://www.jplayer.org/audio/ogg/TSP-01-Cro_magnon_man.ogg",quiz:{question:"are you sure?",description:"can you tell me?",answers:[{title:"yes",correct:!0,id:0},{title:"may be",correct:!1,id:1},{title:"who cares?",correct:!1,id:2},{title:"nope",correct:!1,id:3}]}}]},{name:"Богоматерь Владимирская, с двунадесятыми праздниками",number:"1",image:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/14845c98-05ec-4da8-8aff-11808ecc123f_800x600.jpg",thumb:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/7104d8b7-2f73-4b98-bfb2-b4245a325ce3_480x360.jpg",statsu:"draft",publish_state:"all",description:"",qr_code:{url:"/img/qr_code.png",print_link:"http://localhost:8000/img/qr_code.png"},images:[{image:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/14845c98-05ec-4da8-8aff-11808ecc123f_800x600.jpg",thumb:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/7104d8b7-2f73-4b98-bfb2-b4245a325ce3_480x360.jpg"},{image:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/14845c98-05ec-4da8-8aff-11808ecc123f_800x600.jpg",thumb:"http://media.izi.travel/fc85dcc2-3e95-40a9-9a78-14705a106230/7104d8b7-2f73-4b98-bfb2-b4245a325ce3_480x360.jpg"}],stories:[{language:"ru",name:"Богоматерь Владимирская, с двунадесятыми праздниками",description:"test description",audio:"http://www.jplayer.org/audio/ogg/TSP-01-Cro_magnon_man.ogg",quiz:{question:"are you sure?",description:"can you tell me?",answers:[{title:"yes",correct:!0,id:0},{title:"may be",correct:!1,id:1},{title:"who cares?",correct:!1,id:2},{title:"nope",correct:!1,id:3}]}}]}],e.museum_type_filter="",e.grid=function(){var e,t,a,r;return e=$(".exhibits>li.exhibit"),t=59,r=e.width(),a=parseInt(e.css("margin-left"))+parseInt(e.css("margin-right")),$(".exhibits").css({"text-align":"left"}),i(e,r,a,t),$(window).resize(i.bind(this,e,r,a,t))},e.museum_list_prepare=function(){var e,t,i,a;return t=$("ul.museum_list"),e=t.find("li").length,a=$("body").width(),i=(150*e+160)/a,i>1?($(".museum_filters").show(),t.width(a-200)):($(".museum_filters").hide(),t.width(a-100))},setTimeout(function(){return e.grid(),e.museum_list_prepare()},100),n.setProperty("exhibit",e.exhibits[0]),angular.element(r).bind("resize",function(){return e.grid(),e.museum_list_prepare()}),$(".museum_navigation_menu .search").click(function(){var e;return e=$(this),e.hide(),e.next().show().children().first().focus()}),$(".museum_navigation_menu .search_input input").blur(function(){var e,t;return e=$(this),t=e.parents(".search_input"),e.animate({width:"150px"},150,function(){return t.hide(),t.prev().show()})}),$(".museum_navigation_menu .search_input input").focus(function(){var e,t;return e=$(this),t=$("body").width()-700,t>150?e.animate({width:""+t+"px"},300):void 0}),e.toggle_menu=function(e){var t,i,a;return e=$(e.target),t=$(".museum_navigation_menu"),i=$(".navigation"),t.is(":visible")?(a=e.data("last-padding"),t.slideUp(300),i.addClass("navbar-fixed-top"),$("body").css({"padding-top":""+a})):(a=$("body").css("padding-top"),e.data("last-padding",a),t.slideDown(300),i.removeClass("navbar-fixed-top"),$("body").css({"padding-top":"0px"}))},e.toggle_filters=function(e){var t,i;return e=$(e.target),t=$(".filters_bar"),i=$(".navigation"),e.hasClass("active")?(t.css({overflow:"hidden"}),t.animate({height:"0px"},200),e.removeClass("active"),i.hasClass("navbar-fixed-top")?$("body").animate({"padding-top":"-=44px"},200):void 0):(t.animate({height:"44px"},200,function(){return t.css({overflow:"visible"})}),i.hasClass("navbar-fixed-top")&&$("body").animate({"padding-top":"+=44px"},200),e.addClass("active"))},e.open_exhibit_dropdown=function(t){var i,a,r,c;if(t.active)return t.active=!1,e.active_exhibit=null;for(c=e.exhibits,a=0,r=c.length;r>a;a++)i=c[a],i.active=!1;return t.active=!0,n.setProperty("exhibit",t)}}]).controller("EditItemController",["$scope","$http","$filter","sharedProperties",function(e,t,i,a){return e.exhibit=a.getProperty("exhibit"),e.$on("exhibitChange",function(){return e.exhibit=a.getProperty("exhibit")})}])}).call(this);