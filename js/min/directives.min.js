(function(){"use strict";angular.module("Museum.directives",[]).directive("ngBlur",function(){return function(e,n,i){return n.bind("blur",function(){return e.$apply(i.ngBlur)})}}).directive("ngFocus",function(e){return function(n,i,t){return n.$watch(t.ngFocus,function(n){return n?e(function(){return i[0].focus()},0,!1):void 0})}}).directive("focusMe",function(e,n){return{link:function(i,t,l){var s;return s=n(l.focusMe),i.$watch(s,function(n){return n===!0?e(function(){return t[0].focus()}):void 0}),t.bind("blur",function(){return i.$apply(s.assign(i,!1))})}}}).directive("stopEvent",function(){return{link:function(e,n,i){return n.bind(i.stopEvent,function(e){return e.stopPropagation()})}}}).directive("switchpubitem",function(){return{restrict:"E",replace:!0,transclude:!0,require:"?ngModel",scope:{item:"=ngItem",provider:"=ngProvider"},template:'<div class="btn-group pull-right item_publish_settings ololo">\n  <button class="btn btn-success dropdown-toggle" data-toggle="dropdown" type="button" ng-switch on="item.publish_state">\n    <div class="extra" ng-switch on="item.publish_state">\n      <i class="icon-globe" ng-switch-when="all" ></i>\n      <i class="icon-user" ng-switch-when="passcode" ></i>\n    </div>\n    <span ng-switch-when="passcode">Publish</span>\n    <span ng-switch-when="all">Published</span>\n    <span class="caret"></span>\n  </button>\n  <ul class="dropdown-menu status-select-dropdown" role="menu">\n    Who can see it in mobile application\n    <li ng-click="item.publish_state = \'all\'">\n      <i class="icon-globe"></i> Everyone\n    </li>\n    <li  ng-click="item.publish_state = \'passcode\'">\n      <i class="icon-user"></i> Only users who have passcode\n      <div class="limited-pass-hint hidden">\n        <div class="limited-pass">\n          {{provider.passcode}}\n        </div>\n        <a href="{{provider.passcode_edit_link}}" target="_blank">Edit</a>\n      </div>\n    </li>\n    <li class="divider"></li>\n    <li class="other_list">\n      <span class="other_lang" ng-click="hidden_list=!hidden_list" stop-event="click">Other languages</a>\n      <ul class="other" ng-hide="hidden_list">\n        <li>\n          <span class="col-lg-4">English </span><i class="icon-globe"></i>\n        </li>\n        <li>\n          <span class="col-lg-4">Italian </span><i class="icon-lock"></i>\n        </li>\n        <li>\n          <span class="col-lg-4">Japan</span>\n        </li>\n      </ul>\n    </li>\n  </ul>\n</div>',link:function(){return!0}}}).directive("switchpub",function(){return{restrict:"E",replace:!0,transclude:!0,require:"?ngModel",scope:{item:"=ngItem",provider:"=ngProvider"},template:'<div class="btn-group">\n  <button class="btn btn-default dropdown-toggle" data-toggle="dropdown" type="button">\n    <div class="extra_right" ng-switch on="item.publish_state">\n      <i class="icon-globe" ng-switch-when="all" ></i>\n      <i class="icon-user" ng-switch-when="passcode" ></i>\n    </div>\n    <span class="caret"></span></button>\n  <ul class="dropdown-menu" role="menu">\n    Who can see it in mobile application\n    <li ng-click="item.publish_state = \'all\'">\n      <i class="icon-globe"></i> Everyone\n    </li>\n    <li  ng-click="item.publish_state = \'passcode\'">\n      <i class="icon-user"></i> Only users who have passcode\n      <div class="limited-pass-hint hidden">\n        <div class="limited-pass">\n          {{provider.passcode}}\n        </div>\n        <a href="{{provider.passcode_edit_link}}" target="_blank">Edit</a>\n      </div>\n    </li>\n  </ul>\n</div>',link:function(){return!0}}}).directive("placeholderfield",function(){return{restrict:"E",replace:!0,transclude:!0,require:"?ngModel",scope:{item:"=ngItem",help:"@ngHelp",id:"@ngId",title:"@ngTitle",field:"@ngField"},template:'<div class="form-group">\n  <label class="col-lg-2 control-label" for="{{id}}" ng-click="edit_mode = false">{{title}}</label>\n  <div class="help" popover="{{help}}" popover-placement="bottom" popover-animation="true" popover-trigger="mouseenter">\n    <i class="icon-question-sign"></i>\n  </div>\n  <div class="col-lg-6 trigger" ng-hide="edit_mode || item[field].length == 0">\n    <span class="placeholder" ng-click="edit_mode = true">{{item[field]}}</span>\n  </div>\n  <div class="col-lg-6 triggered" ng-show="edit_mode || item[field].length == 0">\n    <input class="form-control" id="{{id}}" ng-model="item[field]" focus-me="edit_mode" type="text"  ng-blur="item.statuses[field]=\'progress\'">\n  </div>\n  <status-indicator ng-model="item" ng-field="field"></statusIndicator>\n</div>',link:function(){return!0}}}).directive("placeholdertextarea",function(){return{restrict:"E",replace:!0,transclude:!0,require:"?ngModel",scope:{item:"=ngItem",help:"@ngHelp",id:"@ngId",title:"@ngTitle",field:"@ngField"},template:'<div class="form-group">\n  <label class="col-lg-2 control-label" for="{{id}}" ng-click="edit_mode = false">{{title}}</label>\n  <div class="help" popover="{{help}}" popover-placement="bottom" popover-animation="true" popover-trigger="mouseenter">\n    <i class="icon-question-sign"></i>\n  </div>\n  <div class="col-lg-6 trigger" ng-hide="edit_mode || item[field].length == 0">\n    <span class="placeholder large" ng-click="edit_mode = true">{{item[field]}}</span>\n  </div>\n  <div class="col-lg-6 triggered" ng-show="edit_mode || item[field].length == 0">\n    <textarea class="form-control" id="{{id}}" focus-me="edit_mode" ng-model="item[field]" ng-blur="item.statuses[field]=\'progress\'">\n    </textarea>\n  </div>\n  <status-indicator ng-model="item" ng-field="field"></statusIndicator>\n</div>',link:function(){return!0}}}).directive("quizanswer",function(){return{restrict:"E",replace:!0,transclude:!0,require:"?ngModel",scope:{item:"=ngItem",collection:"=ngCollection",id:"@ngId",title:"@ngTitle",field:"@ngField"},template:'<div class="form-group string optional checkbox_added">\n  <label class="string optional control-label col-lg-2" for="{{id}}"></label>\n  <input class="coorect_answer_radio" name="correct_answer" type="radio" value="{{item.id}}" ng-model="checked" ng-click="check_items(item)"> <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!! -->\n  <div class="col-lg-5 trigger"  ng-hide="edit_mode || item[field].length == 0">\n    <span class="placeholder" ng-click="edit_mode = true">{{item[field]}}</span>\n  </div>\n  <div class="col-lg-5 triggered" ng-show="edit_mode || item[field].length == 0">\n    <input class="form-control" id="{{id}}" placeholder="Enter option" type="text" ng-model="item[field]" focus-me="edit_mode" ng-blur="item.statuses[field]=\'progress\'">\n  </div>\n  <status-indicator ng-model="item" ng-field="field"></statusIndicator>\n</div>',link:function(e){return e.checked=0,e.check_items=function(n){var i,t,l,s;for(s=e.collection,t=0,l=s.length;l>t;t++)i=s[t],i.correct=!1;return n.correct=!0,console.log(n)},e.$watch("collection",function(n){var i,t,l,s;if(n){for(s=[],t=0,l=n.length;l>t;t++)i=n[t],i.correct===!0?s.push(e.checked=i.id):s.push(void 0);return s}},!0)}}}).directive("statusIndicator",function(){return{restrict:"E",replace:!0,transclude:!0,require:"?ngModel",scope:{item:"=ngModel",field:"=ngField"},template:'<div class="statuses">\n  <div class=\'preloader\' ng-show="item.statuses[field]==\'progress\'"></div>\n  <div class="save_status" ng-show="item.statuses[field]==\'done\'">\n    <i class="icon-ok-sign"></i>saved\n  </div>\n</div>',link:function(e){return null==e.item.statuses&&(e.item.statuses={}),e.$watch("item.statuses[field]",function(n){return n&&("progress"===n&&setTimeout(function(){return e.$apply(e.item.statuses[e.field]="done")},500),"done"===n)?setTimeout(function(){return e.$apply(e.item.statuses[e.field]="")},700):void 0},!0)}}})}).call(this);